import y from"./Master-98d582ab.js";import{s as g}from"./multiselect-a08154dd.js";import{_ as k,r as h,o as i,c as n,b as s,t as o,f as l,w as u,g as E,h as _,v as b,n as c,i as f,d as m}from"./app-cf38e265.js";import"http://ttcglobal.test/backend/assets/vendor/bootstrap/js/bootstrap.bundle.min.js";const U={layout:y,props:["userId"],components:{Multiselect:g},created(){this.fetchUser()},data(){return{form:{user_name:"",email:""},formErrors:[],formStatus:"Yes",RoleOptions:["user","admin","super admin"]}},methods:{fetchUser(){axios.get(route("api.users.show",this.userId),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(e=>{this.form.user_name=e.data.name,this.form.email=e.data.email,this.form.role=e.data.role}).catch(e=>{toastr.error(e.response.data.message)})},submit(){this.formStatus="No";let e=new FormData;e.append("id",this.userId),e.append("user_name",this.form.user_name),e.append("email",this.form.email),e.append("role",this.form.role),axios.post(route("api.users.update"),e,{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(r=>{toastr.success(this.translate("User updated successfully.")),this.$inertia.get(route("users"))}).catch(r=>{toastr.error(r.response.data.message),r.response.data.errors&&(this.formStatus="Yes",this.formErrors=r.response.data.errors)})}}},w={id:"main",class:"main"},V={class:"pagetitle d-flex justify-content-between"},S={class:"breadcrumb"},I={class:"breadcrumb-item"},M={class:"breadcrumb-item"},B={class:"breadcrumb-item"},N={class:"breadcrumb-item active"},C={class:"section"},D={class:"card"},z={class:"card-body pt-4"},R={class:"row g-3"},Y={class:"col-12 col-md-6"},A={for:"user_name"},L={key:0,class:"invalid-feedback animated fadeIn"},O={class:"col-12 col-md-6"},T={for:"email"},j={key:0,class:"invalid-feedback animated fadeIn"},F={class:"col-12 col-md-6"},G={key:0,class:"invalid-feedback animated fadeIn"},q={class:"mt-5"},H={key:0,type:"submit",class:"btn btn-success"},J={key:1,class:"btn btn-success",type:"button",disabled:""};function K(e,r,P,Q,t,p){const d=h("Link"),v=h("Multiselect");return i(),n("main",w,[s("div",V,[s("div",null,[s("h1",null,o(e.translate("Edit User")),1),s("nav",null,[s("ol",S,[s("li",I,[l(d,{href:e.route("dashboard")},{default:u(()=>[m(o(e.$page.props.website_name),1)]),_:1},8,["href"])]),s("li",M,[l(d,{href:e.route("users")},{default:u(()=>[m(o(e.translate("Users")),1)]),_:1},8,["href"])]),s("li",B,[l(d,{href:e.route("users")},{default:u(()=>[m(o(t.form.user_name),1)]),_:1},8,["href"])]),s("li",N,o(e.translate("Edit")),1)])])]),l(d,{class:"btn btn-success",href:e.route("users")},{default:u(()=>[m(o(e.translate("Go to Users")),1)]),_:1},8,["href"])]),s("section",C,[s("div",D,[s("div",z,[s("form",{onSubmit:r[3]||(r[3]=E((...a)=>p.submit&&p.submit(...a),["prevent"]))},[s("div",R,[s("div",Y,[s("label",A,o(e.translate("User name")),1),_(s("input",{type:"text",class:c(["form-control",{"invalid-bg":t.formErrors.user_name}]),id:"user_name","onUpdate:modelValue":r[0]||(r[0]=a=>t.form.user_name=a)},null,2),[[b,t.form.user_name]]),t.formErrors.user_name?(i(),n("div",L,o(t.formErrors.user_name[0]),1)):f("",!0)]),s("div",O,[s("label",T,o(e.translate("User email")),1),_(s("input",{type:"email",class:c(["form-control",{"invalid-bg":t.formErrors.email}]),id:"email","onUpdate:modelValue":r[1]||(r[1]=a=>t.form.email=a)},null,2),[[b,t.form.email]]),t.formErrors.email?(i(),n("div",j,o(t.formErrors.email[0]),1)):f("",!0)]),s("div",F,[s("label",null,o(e.translate("Role")),1),l(v,{id:"",modelValue:t.form.role,"onUpdate:modelValue":r[2]||(r[2]=a=>t.form.role=a),options:t.RoleOptions,searchable:!0,class:c({"invalid-bg":t.formErrors.role})},null,8,["modelValue","options","class"]),t.formErrors.role?(i(),n("div",G,o(t.formErrors.role[0]),1)):f("",!0)])]),s("div",q,[t.formStatus=="Yes"?(i(),n("button",H,o(e.translate("Save")),1)):(i(),n("button",J,[m(o(e.translate("Save"))+" ",1),r[4]||(r[4]=s("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1))]))])],32)])])])])}const $=k(U,[["render",K]]);export{$ as default};
